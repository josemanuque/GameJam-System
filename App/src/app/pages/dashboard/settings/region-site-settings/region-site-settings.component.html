<app-sidenav></app-sidenav>

<mat-sidenav-container>
    <mat-sidenav-content>
        <div class="content mat-elevation-z4" #contentContainer>
            <div class="custom-container">

                <div class="row d-flex justify-content-center ">
                    <h1 class="d-flex">Region and Site Change</h1>
                </div>
                <form [formGroup]="form" (ngSubmit)="onUpdate()">
                    <div class="formContainer row d-flex justify-content-center">
                        @if (user){
                        <mat-form-field>
                            <mat-label>Region</mat-label>
                            <mat-select formControlName="region">
                                @for (region of regions; track region) {
                                <mat-option [value]="region.viewValue" (click)="getSites(region.viewValue)">{{region.viewValue}}</mat-option>
                                }
                            </mat-select>
                        </mat-form-field>
                        }
                        @if (siteData.length > 0) {
                        <mat-form-field>
                            <mat-label>Select Site</mat-label>
                            <mat-select formControlName="site">
                                @for (site of siteData; track site) {
                                <mat-option [value]="site._id">{{site.name}}, {{site.country}},
                                    {{site.city}}</mat-option>
                                }
                            </mat-select>
                        </mat-form-field>
                        }
                    </div>
                    <div class="row d-flex justify-content-center">
                        <button mat-flat-button class="btn btn-primary submit-button" mat-raised-button color="primary"
                            type="submit">Update Region and Site</button>
                    </div>
                </form>

            </div>
        </div>
    </mat-sidenav-content>
</mat-sidenav-container>